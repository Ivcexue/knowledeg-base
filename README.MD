# 智能知识库问答系统

一个基于 AI 技术的智能知识库问答系统，支持文档上传、向量化存储、智能检索和对话式问答。

## ✨ 功能特性

- 🔍 **智能搜索**：支持向量搜索和关键词混合搜索
- 🤖 **AI 对话**：基于阿里云百炼大语言模型的智能问答
- 📂 **知识管理**：文档上传、向量化存储和管理
- ⚡ **实时响应**：流式数据传输，实时显示 AI 回复
- 💻 **现代 UI**：基于 Ant Design 的美观界面
- ✅ **类型安全**：全栈 TypeScript 开发

## 🏗️ 技术架构

### 后端技术栈

- **Node.js** + **Express.js**：服务端框架
- **TypeScript**：类型安全开发语言
- **Qdrant**：向量数据库
- **阿里云百炼**：AI 大语言模型服务
- **CORS**：跨域支持
- **Server-Sent Events**：流式数据传输技术

### 前端技术栈

- **React 18**：构建用户界面
- **TypeScript**：类型安全支持
- **Vite**：极速构建工具
- **Ant Design**：UI 组件库
- **Tailwind CSS**：样式框架
- **React Router**：路由管理


## 🚀 快速开始

### 环境要求

- Node.js >= 16.0.0
- Docker (用于运行 Qdrant 数据库)
- 阿里云百炼账号和 API Key

### 1. 克隆项目

```bash
git clone <repository-url>
cd knowledge-base
```

### 2. 启动 Qdrant 数据库

```bash
# 拉取 Qdrant 镜像
docker pull qdrant/qdrant

# 启动 Qdrant 容器
docker run -d -p 6333:6333 -p 8080:8080 qdrant/qdrant
```

### 3. 配置环境变量

在 `knowledge-server` 目录下创建 `.env` 文件：

```env
# 服务器配置
PORT=3000

# 阿里云百炼配置
DASHSCOPE_API_KEY=your_api_key_here
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
DASHSCOPE_API_URL=https://dashscope.aliyuncs.com
DASHSCOPE_API_RERANK_PATH=/api/v1/services/rerank/text-rerank/text-rerank

# Qdrant 向量数据库
QDRANT_API_URL=http://localhost:6333
```

### 4. 启动后端服务

**测试数据初始化**
```
knowledge-base/knowledge-server/src/mock.ts
```

```bash
cd knowledge-server

# 安装依赖
npm install

# 编译项目
npm run build

# 插入测试数据（可选）
npm run mock

# 启动服务
npm run start
```

### 5. 启动前端应用

```bash
cd knowledeg-web

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 6. 访问应用

- 前端应用: http://localhost:5173
- Qdrant 管理界面: http://localhost:8080
- 后端 API: http://localhost:3000


## 🔍 核心功能

### 1. 智能搜索
- **向量搜索**: 使用文本嵌入模型将查询转换为向量，在向量数据库中搜索相似文档
- **混合搜索**: 结合向量搜索和关键词搜索，提供更准确的搜索结果
- **文档重排序**: 使用 rerank 模型对搜索结果进行重新排序，提高相关性

### 2. AI 对话
- **上下文理解**: 基于知识库内容进行智能问答
- **流式响应**: 实时显示 AI 回复内容
- **多轮对话**: 支持连续对话交互

### 3. 知识管理
- **文档上传**: 支持多种格式的文档上传
- **向量化存储**: 自动将文档转换为向量并存储
- **元数据管理**: 支持文档的元数据管理和检索


### 后端开发

```bash
cd knowledge-server

# 开发模式（需要先编译）
npm run build && npm run start

# 插入测试数据
npm run mock
```

### 前端开发

```bash
cd knowledeg-web

# 开发模式
npm run dev

# 构建生产版本
npm run build

# 代码检查
npm run lint

# 代码格式化
npm run format
```